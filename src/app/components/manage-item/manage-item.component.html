<div class='pad10'>
  <mat-card-title>Manage list
    <b
      [contentEditable]="true"
      (keypress)="onKeypress($event)"
      (input)="onNameChanged($event)">{{ title }}
    </b>
  </mat-card-title><br />

  <mat-form-field class='cpc' *ngIf="categories" >
    <mat-select placeholder="Category" name="category" (selectionChange)="onCategorySelected($event)" [(ngModel)]="header.idCategory">
      <mat-option [value]="0">
        <span class='red'>One Shot Deal</span>
      </mat-option>
      <mat-option *ngFor="let cat of categories" [value]="cat.id">
        {{ cat.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <div class="list-item" *ngIf="itemSubject$ | async as items; else loading">
    <mat-card-subtitle>Existing items</mat-card-subtitle>

    <mat-nav-list>
      <a mat-list-item *ngFor="let item of items" [routerLink]="['/EditItem', header.id, item.id]">{{ item.text }}</a>
    </mat-nav-list>

  </div>

  <ng-template #loading>
    <div class="no-item">
      No item defined yet
    </div>
  </ng-template>

  <mat-toolbar class='pos-bottom' fxLayoutAlign="space-evenly center">

    <button mat-icon-button aria-label="Diggiddine" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>

    <button *ngIf="itemSubject$ | async" mat-icon-button aria-label="Clear item list" (click)="confirmClear()">
      <mat-icon>delete_sweep</mat-icon>
    </button>

    <button mat-icon-button aria-label="Delete list" (click)="confirmDelete()">
      <mat-icon>delete_forever</mat-icon>
    </button>

  </mat-toolbar>

</div>
<button mat-mini-fab color="primary" type="button" class="add-fab" matTooltip="Add item" (click)="addItem()">
  <mat-icon>add</mat-icon>
</button>